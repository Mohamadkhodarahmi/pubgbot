# ุฑุจุงุช ุซุจุชโูุงู ุชูโูุง New State Mobile

ุฑุจุงุช ุชูฺฏุฑุงู ุจุฑุง ูุฏุฑุช ุซุจุชโูุงู ุชูโูุง ู ูพูุฑูุง ุฏุฑ ฺฉุงุณุชุฑููโูุง ุจุงุฒ New State Mobile

## ูฺฺฏโูุง

- โ ุซุจุชโูุงู ุชูโูุง ุจุง 3 ุง 4 ุจุงุฒฺฉู
- ๐ฐ ูพุฑุฏุงุฎุช ุงุฒ ุทุฑู ุฏุฑฺฏุงู ุฒุฑูโูพุงู
- ๐ ูุฏุฑุช ูุณุช 16 ูุณูุช (ูุฑ ูุณูุช 4 ููุฑ)
- โณ ุณุณุชู ูุณุช ุงูุชุธุงุฑ
- ๐ง ูพูู ูุฏุฑุช ูุจ
- ๐ ูพุดุชุจุงู ุงุฒ ุฒุจุงู ูุงุฑุณ ู ุงูฺฏูุณ
- ๐ ุชุจุฏู ุณุงุนุช (ุชูุฑุงูุ ุฑุงุถุ UTC)
- ๐ ุฎุฑูุฌ Excel/CSV

## ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง

- Python 3.8 ุง ุจุงูุงุชุฑ
- pip
- ุญุณุงุจ ฺฉุงุฑุจุฑ ุฏุฑ [Zarinpal](https://zarinpal.com) ุจุฑุง ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช

### ูุฑุงุญู ูุตุจ

1. **ฺฉููู ฺฉุฑุฏู ุง ุฏุงูููุฏ ูพุฑูฺู**

```bash
cd pubgbot
```

2. **ูุตุจ ูุงุจุณุชฺฏโูุง**

```bash
pip install -r requirements.txt
```

3. **ุชูุธู ูุชุบุฑูุง ูุญุท**

ูุงู `.env.example` ุฑุง ฺฉูพ ฺฉุฑุฏู ู ุจู `.env` ุชุบุฑ ูุงู ุฏูุฏ:

```bash
cp .env.example .env
```

ุณูพุณ ูุงู `.env` ุฑุง ูุฑุงุด ฺฉุฑุฏู ู ููุงุฏุฑ ุฒุฑ ุฑุง ุชูุธู ฺฉูุฏ:

- `BOT_TOKEN`: ุชูฺฉู ุฑุจุงุช ุชูฺฏุฑุงู (ุงุฒ [@BotFather](https://t.me/BotFather) ุฏุฑุงูุช ฺฉูุฏ)
- `ADMIN_IDS`: ุดูุงุณูโูุง ุชูฺฏุฑุงู ูุฏุฑุงู (ุจุง ฺฉุงูุง ุฌุฏุง ฺฉูุฏ)
- `ZARINPAL_MERCHANT_ID`: ุดูุงุณู ูุฑฺูุช ุฒุฑูโูพุงู
- `ZARINPAL_CALLBACK_URL`: ุขุฏุฑุณ callback ุจุฑุง ูพุฑุฏุงุฎุช (ูุซูุงู: `https://yourdomain.com/payment/callback`)
- ุณุงุฑ ุชูุธูุงุช ุฑุง ุจุฑ ุงุณุงุณ ูุงุฒ ุฎูุฏ ุชุบุฑ ุฏูุฏ

4. **ุฑุงูโุงูุฏุงุฒ ุฏุชุงุจุณ**

ุฏุชุงุจุณ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ ุงููู ุงุฌุฑุง ุงุฌุงุฏ ูโุดูุฏ. ุจุฑุง ุงุณุชูุงุฏู ุงุฒ PostgreSQL:

```bash
# ูุตุจ PostgreSQL adapter
pip install psycopg2-binary

# ุชุบุฑ DATABASE_URL ุฏุฑ .env
DATABASE_URL=postgresql://user:password@localhost/dbname
```

5. **ุงุฌุฑุง ุฑุจุงุช**

```bash
python bot.py
```

6. **ุงุฌุฑุง ูพูู ูุฏุฑุช (ุฏุฑ ุชุฑููุงู ุฌุฏุงฺฏุงูู)**

```bash
python admin_panel.py
```

ูพูู ูุฏุฑุช ุฏุฑ ุขุฏุฑุณ `http://localhost:5000/admin` ุฏุฑ ุฏุณุชุฑุณ ุฎูุงูุฏ ุจูุฏ.

## ุงุณุชูุงุฏู

### ุจุฑุง ฺฉุงุฑุจุฑุงู

1. ุฑุจุงุช ุฑุง ุฏุฑ ุชูฺฏุฑุงู ูพุฏุง ฺฉุฑุฏู ู `/start` ุฑุง ุงุฑุณุงู ฺฉูุฏ
2. ุฑู "๐ ุซุจุชโูุงู ุชู" ฺฉูฺฉ ฺฉูุฏ
3. ุชุนุฏุงุฏ ุจุงุฒฺฉูุงู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ (3 ุง 4)
4. ูุงู ุจุงุฒฺฉูุงู ุฑุง ูุงุฑุฏ ฺฉูุฏ
5. ูุงู ุชู ุฑุง ูุงุฑุฏ ฺฉูุฏ
6. ููฺฉ ูพุฑุฏุงุฎุช ุฑุง ุฏุฑุงูุช ฺฉุฑุฏู ู ูพุฑุฏุงุฎุช ุฑุง ุงูุฌุงู ุฏูุฏ
7. ูพุณ ุงุฒ ุชุงุฏ ูพุฑุฏุงุฎุชุ ุชู ุดูุง ุฏุฑ ูุณุช ูุฑุงุฑ ูโฺฏุฑุฏ

### ุจุฑุง ูุฏุฑุงู

#### ุงุฒ ุทุฑู ุฑุจุงุช ุชูฺฏุฑุงู:

- ุฏุณุชูุฑ `/start` ุฑุง ุงุฑุณุงู ฺฉูุฏ
- ุฑู "๐ง ูพูู ูุฏุฑุช" ฺฉูฺฉ ฺฉูุฏ
- ุงุฒ ููู ูุฏุฑุช ุงุณุชูุงุฏู ฺฉูุฏ

#### ุงุฒ ุทุฑู ูพูู ูุจ:

1. ุจู ุขุฏุฑุณ `http://localhost:5000/admin` ุจุฑูุฏ
2. ูุถุนุช ุซุจุชโูุงู ุฑุง ูุดุงูุฏู ฺฉูุฏ
3. ุซุจุชโูุงู ุฑุง ุจุงุฒ/ุจุณุชู ฺฉูุฏ
4. ููุช ุฑุง ุชุบุฑ ุฏูุฏ
5. ูุงู Excel ุฑุง ุฏุงูููุฏ ฺฉูุฏ

## ุฏุณุชูุฑุงุช ุฑุจุงุช

- `/start` - ุดุฑูุน ุฑุจุงุช ู ููุงุด ููู ุงุตู
- `/help` - ููุงุด ุฑุงูููุง
- `/verify <authority>` - ุชุงุฏ ุฏุณุช ูพุฑุฏุงุฎุช (ููุท ุจุฑุง ูุฏุฑุงู)

## ุณุงุฎุชุงุฑ ูพุฑูฺู

```
pubgbot/
โโโ bot.py                 # ูุงู ุงุตู ุฑุจุงุช
โโโ bot_handlers.py        # Handlerูุง ุฑุจุงุช
โโโ admin_handlers.py      # Handlerูุง ูพูู ูุฏุฑุช
โโโ payment_gateway.py     # ุงุชุตุงู ุจู ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช
โโโ payment_callback.py    # ูุฏุฑุช callback ูพุฑุฏุงุฎุช
โโโ database.py            # ูุฏูโูุง ุฏุชุงุจุณ
โโโ i18n.py                # ุณุณุชู ฺูุฏุฒุจุงูู
โโโ timezone_utils.py      # ุชุจุฏู ุณุงุนุช
โโโ config.py              # ุชูุธูุงุช
โโโ admin_panel.py         # ูพูู ูุฏุฑุช ูุจ
โโโ webhook_server.py      # ุณุฑูุฑ webhook ุจุฑุง callback
โโโ requirements.txt       # ูุงุจุณุชฺฏโูุง
โโโ .env.example          # ููููู ูุงู ุชูุธูุงุช
โโโ README.md             # ุงู ูุงู
```

## ุชูุธูุงุช ููู

### ุจุงุฒ/ุจุณุชู ุซุจุชโูุงู

ุงุฒ ุทุฑู ูพูู ูุฏุฑุช ุง ุฑุจุงุช ุชูฺฏุฑุงู ูโุชูุงูุฏ ุซุจุชโูุงู ุฑุง ุจุงุฒ ุง ุจุณุชู ฺฉูุฏ.

### ุชุบุฑ ููุช

ุฏุฑ ูพูู ูุฏุฑุชุ ููุช ูุฑ ุจุงุฒฺฉู ุฑุง ูโุชูุงูุฏ ุชุบุฑ ุฏูุฏ.

### ุชูุธู ฺฉุงูุงู/ฺฏุฑูู ููุตุฏ

ุฏุฑ ูุงู `.env`:
- `TARGET_CHANNEL_ID`: ุดูุงุณู ฺฉุงูุงู ุจุฑุง ุงุฑุณุงู ูุณุชโูุง
- `TARGET_GROUP_ID`: ุดูุงุณู ฺฏุฑูู ุจุฑุง ุงุฑุณุงู ูุณุชโูุง

**ูฺฉุชู:** ุจุฑุง ุฏุฑุงูุช ุดูุงุณู ฺฉุงูุงู/ฺฏุฑูู:
- ุจุฑุง ฺฉุงูุงู: ุงุฒ `@username` ุงุณุชูุงุฏู ฺฉูุฏ ุง ุดูุงุณู ุนุฏุฏ ุฑุง ุงุฒ ุฑุจุงุชโูุง ุฏฺฏุฑ ุฏุฑุงูุช ฺฉูุฏ
- ุจุฑุง ฺฏุฑูู: ุดูุงุณู ุนุฏุฏ ุฑุง ุงุฒ ุฑุจุงุชโูุง ุฏฺฏุฑ ุฏุฑุงูุช ฺฉูุฏ (ูุซูุงู `@userinfobot`)

## ุงููุช

- โ ุงุนุชุจุงุฑุณูุฌ callback ูพุฑุฏุงุฎุช
- โ ุฌููฺฏุฑ ุงุฒ ุซุจุชโูุงูโูุง ุชฺฉุฑุงุฑ
- โ ุฐุฎุฑู ูุงฺฏ ุชูุงู ูพุฑุฏุงุฎุชโูุง
- โ ูุญุฏูุฏ ฺฉุฑุฏู ุฏุณุชุฑุณ ูพูู ูุฏุฑุช ุจู ูุฏุฑุงู

**ูุดุฏุงุฑ:** ุฏุฑ ูุญุท production:
- `PANEL_SECRET_KEY` ุฑุง ุจู ฺฉ ููุฏุงุฑ ุชุตุงุฏู ูู ุชุบุฑ ุฏูุฏ
- ุงุฒ HTTPS ุจุฑุง webhook ุงุณุชูุงุฏู ฺฉูุฏ
- ุฏุณุชุฑุณ ุจู ูพูู ูุฏุฑุช ุฑุง ูุญุฏูุฏ ฺฉูุฏ

## ุนุจโุงุจ

### ุฑุจุงุช ฺฉุงุฑ ููโฺฉูุฏ

1. ุจุฑุฑุณ ฺฉูุฏ ฺฉู `BOT_TOKEN` ุฏุฑุณุช ุชูุธู ุดุฏู ุจุงุดุฏ
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุชูุงู ูุงุจุณุชฺฏโูุง ูุตุจ ุดุฏู ุจุงุดูุฏ
3. ูุงฺฏโูุง ุฎุทุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### ูพุฑุฏุงุฎุช ุชุงุฏ ููโุดูุฏ

1. ุจุฑุฑุณ ฺฉูุฏ ฺฉู `ZARINPAL_MERCHANT_ID` ุฏุฑุณุช ุจุงุดุฏ
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู `ZARINPAL_CALLBACK_URL` ูุงุจู ุฏุณุชุฑุณ ุจุงุดุฏ
3. ุงุฒ ุฏุณุชูุฑ `/verify <authority>` ุจุฑุง ุชุงุฏ ุฏุณุช ุงุณุชูุงุฏู ฺฉูุฏ

### ุฏุชุงุจุณ ุฎุทุง ูโุฏูุฏ

1. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุณุฑ ุฏุชุงุจุณ ูุงุจู ููุดุชู ุจุงุดุฏ
2. ุจุฑุง PostgreSQLุ ุงุชุตุงู ุจู ุฏุชุงุจุณ ุฑุง ุจุฑุฑุณ ฺฉูุฏ

## ูพุดุชุจุงู

ุจุฑุง ฺฏุฒุงุฑุด ุจุงฺฏ ุง ูพุดููุงุฏ ูฺฺฏ ุฌุฏุฏุ ูุทูุงู issue ุงุฌุงุฏ ฺฉูุฏ.

## ูุฌูุฒ

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ MIT ููุชุดุฑ ุดุฏู ุงุณุช.

